<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è·¨å¹´å€’è®¡æ—¶ç½‘ç«™ - è¿æ¥2026</title>
    
    <!-- å®‰å…¨é˜²æŠ¤è„šæœ¬ -->
    <script>
        // é˜²æ­¢å¼€å‘è€…å·¥å…·
        (function() {
            var devtools = {
                isOpen: false,
                orientation: null
            };
            
            var threshold = 160;
            
            var emitEvent = function(isOpen, orientation) {
                window.dispatchEvent(new CustomEvent('devtoolschange', {
                    detail: {
                        isOpen: isOpen,
                        orientation: orientation
                    }
                }));
            };
            
            setInterval(function() {
                var widthThreshold = window.outerWidth - window.innerWidth > threshold;
                var heightThreshold = window.outerHeight - window.innerHeight > threshold;
                var orientation = widthThreshold ? 'vertical' : 'horizontal';
                
                if (!(heightThreshold && widthThreshold) &&
                    ((window.Firebug && window.Firebug.chrome && window.Firebug.chrome.isInitialized) || widthThreshold || heightThreshold)) {
                    if (!devtools.isOpen || devtools.orientation !== orientation) {
                        emitEvent(true, orientation);
                        devtools.isOpen = true;
                        devtools.orientation = orientation;
                        window.location.href = "about:blank";
                    }
                } else {
                    if (devtools.isOpen) {
                        emitEvent(false, null);
                        devtools.isOpen = false;
                        devtools.orientation = null;
                    }
                }
            }, 500);
            
            // ç¦ç”¨å³é”®
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                return false;
            });
            
            // ç¦ç”¨é€‰æ‹©æ–‡æœ¬
            document.addEventListener('selectstart', function(e) {
                e.preventDefault();
                return false;
            });
            
            // ç¦ç”¨å¤åˆ¶
            document.addEventListener('copy', function(e) {
                e.preventDefault();
                return false;
            });
            
            // ç¦ç”¨F12ç­‰å¼€å‘è€…å¿«æ·é”®
            document.addEventListener('keydown', function(e) {
                if (e.key === 'F12' || 
                    (e.ctrlKey && e.shiftKey && e.key === 'I') || 
                    (e.ctrlKey && e.shiftKey && e.key === 'J') || 
                    (e.ctrlKey && e.key === 'U') ||
                    (e.ctrlKey && e.shiftKey && e.key === 'C')) {
                    e.preventDefault();
                    return false;
                }
            });
        })();
    </script>
    
    <!-- å¤–éƒ¨åº“ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Sans+SC:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    
    <style>
        /* ========== åŸºç¡€æ ·å¼ ========== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }
        
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: #000000;
            color: #FFFFFF;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        
        /* ========== ç²’å­èƒŒæ™¯ ========== */
        #particles-js {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }
        
        /* ========== ç²’å­æ–‡å­—ç‰¹æ•ˆå®¹å™¨ ========== */
        .text-particle-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2100;
            pointer-events: none;
            display: none;
        }
        
        .text-particle-container.active {
            display: block;
        }
        
        .text-particle {
            position: absolute;
            font-size: 3rem;
            font-weight: 900;
            color: transparent;
            background: linear-gradient(45deg, #FF3366, #33CCFF, #FFCC00);
            -webkit-background-clip: text;
            background-clip: text;
            text-shadow: 0 0 30px currentColor;
            opacity: 0;
            transform: translateY(50px) scale(0.5);
            animation: textParticleFloat 8s ease-out forwards;
            pointer-events: none;
            z-index: 2101;
        }
        
        @keyframes textParticleFloat {
            0% {
                opacity: 0;
                transform: translateY(50px) scale(0.5);
            }
            20% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            80% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-50px) scale(0.5);
            }
        }
        
        /* ========== æ–‡å­—æ˜¾ç¤ºå®¹å™¨ ========== */
        .text-display-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2102;
            text-align: center;
            width: 90%;
            max-width: 1000px;
            pointer-events: none;
            display: none;
        }
        
        .text-display-container.active {
            display: block;
        }
        
        .static-text {
            font-size: 4rem;
            font-weight: 900;
            color: #FFFFFF;
            text-shadow: 
                0 0 30px #FF3366,
                0 0 60px #33CCFF,
                0 0 90px #FFCC00;
            margin: 40px 0;
            opacity: 0;
            transform: scale(0.8);
            transition: all 1.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            display: inline-block;
            padding: 20px 40px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 2px solid transparent;
            background-clip: padding-box;
        }
        
        .static-text::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #FF3366, #33CCFF, #FFCC00);
            border-radius: 22px;
            z-index: -1;
            animation: borderGlow 3s ease-in-out infinite;
        }
        
        @keyframes borderGlow {
            0%, 100% { opacity: 0.5; filter: blur(5px); }
            50% { opacity: 1; filter: blur(2px); }
        }
        
        .static-text.active {
            opacity: 1;
            transform: scale(1);
        }
        
        .text-highlight {
            color: #FFCC00;
            font-weight: 900;
            text-shadow: 0 0 40px #FFCC00;
        }
        
        .text-user {
            color: #33CCFF;
            font-weight: 900;
            text-shadow: 0 0 40px #33CCFF;
        }
        
        /* ========== ä¿¡å°æŒ‰é’®å®¹å™¨ ========== */
        .envelope-button-container {
            position: fixed;
            bottom: 150px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 2200;
            text-align: center;
            display: none;
            animation: envelopePulse 2s ease-in-out infinite;
            pointer-events: auto;
        }
        
        .envelope-button-container.active {
            display: block;
        }
        
        @keyframes envelopePulse {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.1); }
        }
        
        .envelope-hint {
            color: #FFCC00;
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(255, 204, 0, 0.5);
            animation: hintGlow 2s ease-in-out infinite;
        }
        
        @keyframes hintGlow {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }
        
        .envelope-btn {
            background: linear-gradient(135deg, #FF3366, #33CCFF);
            color: #FFFFFF;
            border: none;
            padding: 25px 60px;
            border-radius: 50px;
            font-size: 1.5rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            box-shadow: 
                0 10px 30px rgba(255, 51, 102, 0.4),
                0 0 50px rgba(51, 204, 255, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .envelope-btn:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 
                0 20px 40px rgba(255, 51, 102, 0.6),
                0 0 80px rgba(51, 204, 255, 0.5);
        }
        
        /* ========== æ¬¢è¿ç•Œé¢ ========== */
        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #000428 0%, #004e92 50%, #0a0a2a 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .welcome-content {
            background: rgba(10, 10, 42, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            padding: 60px 50px;
            width: 90%;
            max-width: 600px;
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 100px rgba(51, 204, 255, 0.3);
        }
        
        .welcome-title {
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 4.5rem;
            background: linear-gradient(45deg, #FF3366, #33CCFF, #FFCC00);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 25px;
            text-shadow: 0 0 30px rgba(255, 51, 102, 0.5);
        }
        
        .form-group {
            margin-bottom: 35px;
            text-align: left;
        }
        
        .form-label {
            display: block;
            margin-bottom: 15px;
            color: #FFCC00;
            font-size: 1.2rem;
            font-weight: 500;
        }
        
        .form-input {
            width: 100%;
            padding: 20px 25px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            color: #FFFFFF;
            font-size: 1.1rem;
            transition: all 0.4s;
        }
        
        .form-input:focus {
            background: rgba(255, 255, 255, 0.1);
            border-color: #33CCFF;
            box-shadow: 0 0 30px rgba(51, 204, 255, 0.4);
            outline: none;
        }
        
        .btn {
            background: linear-gradient(135deg, #FF3366, #33CCFF);
            color: #FFFFFF;
            border: none;
            padding: 22px 60px;
            border-radius: 50px;
            font-size: 1.3rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            box-shadow: 0 10px 30px rgba(255, 51, 102, 0.4);
        }
        
        .btn:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 20px 40px rgba(255, 51, 102, 0.6);
        }
        
        /* ========== ä¸»å†…å®¹åŒºåŸŸ ========== */
        .main-content {
            display: none;
            position: relative;
            z-index: 2;
            min-height: 100vh;
            padding: 40px 20px;
            opacity: 0;
            transform: translateY(50px);
            transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .main-content.active {
            opacity: 1;
            transform: translateY(0);
            display: block;
        }
        
        .header {
            text-align: center;
            padding: 60px 20px;
        }
        
        .year-display {
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 12rem;
            font-weight: 900;
            color: transparent;
            background: linear-gradient(45deg, #FF3366, #33CCFF, #FFCC00);
            -webkit-background-clip: text;
            background-clip: text;
            margin-bottom: 20px;
            text-shadow: 0 0 40px rgba(255, 51, 102, 0.5);
        }
        
        /* ========== å€’è®¡æ—¶åŒºåŸŸ ========== */
        .countdown-container {
            background: rgba(10, 10, 42, 0.8);
            backdrop-filter: blur(25px);
            border-radius: 35px;
            padding: 60px 40px;
            margin: 50px auto;
            max-width: 1000px;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .countdown-title {
            text-align: center;
            font-size: 2.8rem;
            color: #FFCC00;
            margin-bottom: 60px;
            text-shadow: 0 0 30px rgba(255, 204, 0, 0.7);
        }
        
        .countdown {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
        }
        
        .countdown-item {
            background: rgba(255, 51, 102, 0.15);
            border-radius: 25px;
            padding: 50px 30px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .countdown-value {
            font-size: 6rem;
            font-weight: 900;
            color: #FF3366;
            text-shadow: 0 0 30px rgba(255, 51, 102, 0.7);
            line-height: 1;
            margin-bottom: 15px;
            font-family: 'Ma Shan Zheng', cursive;
        }
        
        .countdown-label {
            font-size: 1.4rem;
            color: #33CCFF;
            text-transform: uppercase;
            letter-spacing: 4px;
            font-weight: 500;
            text-shadow: 0 0 20px rgba(51, 204, 255, 0.5);
        }
        
        /* ========== é»‘è‰²è¿‡æ¸¡å±‚ ========== */
        .black-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000000;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .black-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        /* ========== æ–°å¹´è´ºå¡ ========== */
        .letter-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 3000;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .letter-container.active {
            display: flex;
        }
        
        .letter {
            background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
            border-radius: 30px;
            padding: 60px 50px;
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            transform: scale(0.8);
            opacity: 0;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5);
            border: 10px solid #d32f2f;
        }
        
        .letter.active {
            transform: scale(1);
            opacity: 1;
        }
        
        .letter-header {
            color: #d32f2f;
            border-bottom: 3px solid #ff9800;
            padding-bottom: 20px;
            margin-bottom: 30px;
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 2.2rem;
        }
        
        .letter-content {
            color: #5d4037;
            font-size: 1.3rem;
            line-height: 2;
            font-family: 'Ma Shan Zheng', cursive;
            text-align: justify;
            margin-bottom: 40px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            border-left: 5px solid #4caf50;
        }
        
        /* ========== èŠ‚æ—¥æ—¥å† ========== */
        .calendar-container {
            display: none;
            position: relative;
            z-index: 2;
            max-width: 1200px;
            margin: 80px auto;
            padding: 60px 40px;
            background: rgba(10, 10, 42, 0.9);
            backdrop-filter: blur(25px);
            border-radius: 35px;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .calendar-container.active {
            display: block;
        }
        
        .holiday-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .holiday-card {
            background: rgba(255, 51, 102, 0.15);
            border-radius: 25px;
            padding: 35px 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* ========== ç¤¾äº¤é“¾æ¥ ========== */
        .social-links {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .social-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: rgba(255, 51, 102, 0.2);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #FFFFFF;
            font-size: 1.8rem;
            text-decoration: none;
            transition: all 0.4s;
        }
        
        .social-btn:hover {
            transform: translateY(-10px) scale(1.1);
        }
        
        /* ========== é€šçŸ¥ ========== */
        .notification {
            position: fixed;
            top: 30px;
            right: 30px;
            background: linear-gradient(135deg, #FF3366, #33CCFF);
            color: #FFFFFF;
            padding: 25px 35px;
            border-radius: 15px;
            z-index: 4000;
            transform: translateX(200%);
            transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            max-width: 400px;
            font-size: 1.1rem;
            font-weight: 500;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        /* ========== ç®¡ç†å‘˜é¢æ¿ ========== */
        .admin-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.98);
            z-index: 5000;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .admin-panel.active {
            display: flex;
        }
        
        .admin-content {
            background: linear-gradient(135deg, 
                rgba(10, 10, 42, 0.95) 0%, 
                rgba(26, 26, 58, 0.95) 100%);
            backdrop-filter: blur(30px);
            border-radius: 30px;
            padding: 50px;
            width: 90%;
            max-width: 900px;
            border: 3px solid rgba(51, 204, 255, 0.3);
            box-shadow: 
                0 0 200px rgba(51, 204, 255, 0.3),
                0 30px 60px rgba(0, 0, 0, 0.6);
        }
        
        .admin-title {
            color: #FFCC00;
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 40px;
            text-shadow: 0 0 20px rgba(255, 204, 0, 0.5);
        }
        
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .stat-value {
            font-size: 2.5rem;
            color: #33CCFF;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .stat-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 1rem;
        }
        
        .admin-time-control {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .time-input-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .time-input {
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            font-size: 1rem;
            text-align: center;
        }
        
        /* ========== åŠ è½½åŠ¨ç”» ========== */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 6000;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        
        .loading-overlay.active {
            display: flex;
        }
        
        .spinner {
            width: 80px;
            height: 80px;
            border: 8px solid rgba(255, 255, 255, 0.1);
            border-top: 8px solid #33CCFF;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 30px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-text {
            color: #33CCFF;
            font-size: 1.5rem;
            text-align: center;
        }
        
        /* ========== å“åº”å¼è®¾è®¡ ========== */
        @media (max-width: 1200px) {
            .year-display { font-size: 10rem; }
            .countdown-value { font-size: 5rem; }
            .static-text { font-size: 3.5rem; }
            .text-particle { font-size: 2.5rem; }
        }
        
        @media (max-width: 992px) {
            .year-display { font-size: 8rem; }
            .countdown { grid-template-columns: repeat(2, 1fr); }
            .countdown-value { font-size: 4rem; }
            .static-text { font-size: 3rem; }
            .text-particle { font-size: 2rem; }
        }
        
        @media (max-width: 768px) {
            .welcome-title { font-size: 3.5rem; }
            .year-display { font-size: 6rem; }
            .countdown-value { font-size: 3.5rem; }
            .static-text { font-size: 2.5rem; padding: 15px 25px; }
            .text-particle { font-size: 1.8rem; }
            .envelope-btn { padding: 20px 40px; font-size: 1.3rem; }
        }
        
        @media (max-width: 576px) {
            .year-display { font-size: 4.5rem; }
            .countdown { grid-template-columns: 1fr; }
            .countdown-value { font-size: 3rem; }
            .static-text { font-size: 2rem; }
            .text-particle { font-size: 1.5rem; }
        }
    </style>
</head>
<body>
    <!-- ç²’å­èƒŒæ™¯ -->
    <div id="particles-js"></div>
    
    <!-- é»‘è‰²è¿‡æ¸¡å±‚ -->
    <div class="black-overlay" id="blackOverlay"></div>
    
    <!-- ç²’å­æ–‡å­—ç‰¹æ•ˆå®¹å™¨ -->
    <div class="text-particle-container" id="textParticleContainer"></div>
    
    <!-- æ–‡å­—æ˜¾ç¤ºå®¹å™¨ -->
    <div class="text-display-container" id="textDisplayContainer">
        <div class="static-text" id="staticText1">
            <span class="text-highlight">è¾å»2025ï¼Œè¿æ¥2026</span>
        </div>
        <div class="static-text" id="staticText2">
            <span class="text-highlight">2026å·²ç»åˆ°æ¥</span>
        </div>
        <div class="static-text" id="staticText3">
            <span class="text-user" id="userGreeting">è°¢è°¢ä½ åœ¨æˆ‘çš„ç½‘ç«™è·¨å¹´</span>
        </div>
        <div class="static-text" id="staticText4">
            ç¥ä½ åœ¨2026å¹´<span class="text-highlight">å¿ƒæƒ³äº‹æˆ</span>ï¼Œ
            <span class="text-highlight">å­¦ä¸šæœ‰æˆ</span>ï¼Œ
            <span class="text-highlight">å·¥ä½œé¡ºåˆ©</span>ï¼Œ
            <span class="text-highlight">å¿˜æ‰çƒ¦æ¼</span>
        </div>
        <div class="static-text" id="staticText5">
            ä¸‹<span class="text-highlight">2025</span>çš„åˆ—è½¦ï¼Œ
            è½¬<span class="text-highlight">2026</span>çš„åˆ—è½¦
        </div>
        <div class="static-text" id="staticText6">
            ç­‰<span class="text-highlight">2027</span>å¹´ï¼Œæˆ‘ä»¬å†è§
        </div>
    </div>
    
    <!-- ä¿¡å°æŒ‰é’®å®¹å™¨ -->
    <div class="envelope-button-container" id="envelopeButtonContainer">
        <div class="envelope-hint">
            <i class="fas fa-magic"></i> ç‚¹å‡»æŸ¥çœ‹æ‚¨çš„æ–°å¹´è´ºå¡
        </div>
        <button class="envelope-btn" id="envelopeButton">
            <i class="fas fa-envelope-open-text"></i>
            å¼€å¯æ–°å¹´è´ºå¡
        </button>
    </div>
    
    <!-- åŠ è½½åŠ¨ç”» -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <div class="loading-text" id="loadingText">AIæ­£åœ¨åˆ›ä½œæ‚¨çš„æ–°å¹´ç¥ç¦...</div>
    </div>
    
    <!-- æ¬¢è¿ç•Œé¢ -->
    <div class="welcome-screen" id="welcomeScreen">
        <div class="welcome-content">
            <h1 class="welcome-title">ğŸ‰ æ–°å¹´è·¨å¹´å€’è®¡æ—¶ ğŸ‰</h1>
            <p style="color: #33CCFF; margin-bottom: 30px; font-size: 1.2rem;">è¯·è¾“å…¥æ‚¨çš„ä¿¡æ¯ï¼Œå¼€å¯ä¸“å±è·¨å¹´ä¹‹æ—…</p>
            
            <form id="userForm">
                <div class="form-group">
                    <label style="color: #FFCC00; display: block; margin-bottom: 15px;">
                        <i class="fas fa-user"></i> çœŸå®å§“å
                    </label>
                    <input type="text" id="userName" class="form-input" placeholder="è¯·è¾“å…¥æ‚¨çš„çœŸå®å§“å" required>
                </div>
                
                <div class="form-group">
                    <label style="color: #FFCC00; display: block; margin-bottom: 15px;">
                        <i class="fas fa-birthday-cake"></i> çœŸå®å¹´é¾„
                    </label>
                    <input type="number" id="userAge" class="form-input" placeholder="è¯·è¾“å…¥æ‚¨çš„å¹´é¾„ï¼ˆ1-120ï¼‰" min="1" max="120" required>
                </div>
                
                <button type="submit" class="btn">
                    <i class="fas fa-rocket"></i> å¼€å¯å€’è®¡æ—¶
                </button>
            </form>
        </div>
    </div>
    
    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <div class="main-content" id="mainContent">
        <div class="header">
            <div class="year-display" id="yearDisplay">2025</div>
            <p style="color: #33CCFF; font-size: 1.8rem; margin-top: 10px;">è·ç¦»æ–°å¹´è¿˜æœ‰</p>
        </div>
        
        <div class="countdown-container">
            <h2 class="countdown-title">æ–°å¹´å€’è®¡æ—¶</h2>
            <div class="countdown" id="countdown">
                <div class="countdown-item">
                    <div class="countdown-value" id="days">00</div>
                    <div class="countdown-label">å¤©</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-value" id="hours">00</div>
                    <div class="countdown-label">æ—¶</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-value" id="minutes">00</div>
                    <div class="countdown-label">åˆ†</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-value" id="seconds">00</div>
                    <div class="countdown-label">ç§’</div>
                </div>
            </div>
        </div>
        
        <!-- æµ‹è¯•æŒ‰é’® -->
        <div style="text-align: center; margin-top: 50px; display: none;" id="testButtons">
            <button class="btn" id="testNewYearBtn">
                <i class="fas fa-fire"></i> æµ‹è¯•æ–°å¹´ç‰¹æ•ˆ
            </button>
        </div>
    </div>
    
    <!-- æ–°å¹´è´ºå¡ -->
    <div class="letter-container" id="letterContainer">
        <div class="letter" id="letter">
            <div class="letter-header">
                è‡´ï¼š<span id="letterRecipient">äº²çˆ±çš„æœ‹å‹</span>
                <span id="letterAge" style="font-size: 1.2rem; color: #666; margin-left: 10px;"></span>
            </div>
            <div class="letter-content" id="letterContent">
                <!-- AIç”Ÿæˆçš„æ–°å¹´ç¥ç¦ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ -->
            </div>
            <button class="btn" id="closeLetterBtn" style="margin-top: 30px;">
                <i class="fas fa-calendar-alt"></i> æŸ¥çœ‹2026å¹´èŠ‚æ—¥æ—¥å†
            </button>
        </div>
    </div>
    
    <!-- èŠ‚æ—¥æ—¥å† -->
    <div class="calendar-container" id="calendarContainer">
        <h2 style="color: #FFCC00; text-align: center; margin-bottom: 60px; font-size: 3rem;">ğŸŠ 2026å¹´èŠ‚æ—¥æ—¥å† ğŸŠ</h2>
        <div class="holiday-grid" id="holidayGrid">
            <!-- èŠ‚æ—¥å¡ç‰‡ä¼šåŠ¨æ€ç”Ÿæˆ -->
        </div>
        <div style="text-align: center; margin-top: 50px;">
            <button class="btn" id="backToMainBtn">
                <i class="fas fa-home"></i> è¿”å›ä¸»é¡µ
            </button>
        </div>
    </div>
    
    <!-- ç¤¾äº¤é“¾æ¥ -->
    <div class="social-links">
        <a href="https://qm.qq.com/q/DuvNB5xeqm" target="_blank" class="social-btn" title="åŠ å…¥QQç¾¤">
            <i class="fab fa-qq"></i>
        </a>
        <a href="mailto:3530388417@qq.com" class="social-btn" title="è”ç³»å¼€å‘è€…">
            <i class="fas fa-envelope"></i>
        </a>
    </div>
    
    <!-- é€šçŸ¥ -->
    <div class="notification" id="notification">
        <i class="fas fa-info-circle"></i>
        <span id="notificationText">é€šçŸ¥æ¶ˆæ¯</span>
    </div>
    
    <!-- ç®¡ç†å‘˜é¢æ¿ -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-content">
            <h2 class="admin-title"><i class="fas fa-cogs"></i> ç®¡ç†å‘˜æ§åˆ¶å°</h2>
            
            <div class="admin-stats">
                <div class="stat-card">
                    <div class="stat-value" id="totalUsers">0</div>
                    <div class="stat-label">ä»Šæ—¥ç”¨æˆ·</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="activeUsers">1</div>
                    <div class="stat-label">å½“å‰åœ¨çº¿</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalVisits">1</div>
                    <div class="stat-label">æ€»è®¿é—®é‡</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="currentYear">2025</div>
                    <div class="stat-label">å½“å‰å¹´ä»½</div>
                </div>
            </div>
            
            <div class="admin-time-control">
                <h3 style="color: #33CCFF; margin-bottom: 25px; font-size: 1.5rem;">
                    <i class="fas fa-clock"></i> æ—¶é—´æ§åˆ¶ç³»ç»Ÿ
                </h3>
                <div style="margin-bottom: 15px; color: rgba(255,255,255,0.8);">
                    ç³»ç»Ÿæ—¶é—´: <span id="adminCurrentTime">--:--:--</span>
                </div>
                <div class="time-input-group">
                    <input type="number" id="adminYear" class="time-input" placeholder="å¹´" value="2025" min="2000" max="2030">
                    <input type="number" id="adminMonth" class="time-input" placeholder="æœˆ" value="12" min="1" max="12">
                    <input type="number" id="adminDay" class="time-input" placeholder="æ—¥" value="31" min="1" max="31">
                    <input type="number" id="adminHour" class="time-input" placeholder="æ—¶" value="23" min="0" max="23">
                    <input type="number" id="adminMinute" class="time-input" placeholder="åˆ†" value="59" min="0" max="59">
                    <input type="number" id="adminSecond" class="time-input" placeholder="ç§’" value="59" min="0" max="59">
                </div>
                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <button class="btn" id="setTimeBtn" style="padding: 15px 30px;">
                        <i class="fas fa-play"></i> è®¾ç½®æ—¶é—´
                    </button>
                    <button class="btn" id="resetTimeBtn" style="padding: 15px 30px; background: rgba(255,255,255,0.1);">
                        <i class="fas fa-redo"></i> é‡ç½®æ—¶é—´
                    </button>
                    <button class="btn" id="triggerNewYearBtn" style="padding: 15px 30px; background: linear-gradient(135deg, #FFCC00, #FF3366);">
                        <i class="fas fa-fire"></i> è§¦å‘æ–°å¹´ç‰¹æ•ˆ
                    </button>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 40px;">
                <button class="btn" id="closeAdminBtn" style="background: rgba(255,255,255,0.1);">
                    <i class="fas fa-times"></i> å…³é—­æ§åˆ¶å°
                </button>
            </div>
        </div>
    </div>
    
    <!-- éŸ³é¢‘å…ƒç´  -->
    <audio id="newYearAudio" preload="auto">
        <!-- æœ¬åœ°æµ‹è¯•æ—¶è¯·ç¡®ä¿newyear.mp3åœ¨åŒä¸€ç›®å½• -->
        <source src="newyear.mp3" type="audio/mp3">
        <!-- å¤‡ç”¨éŸ³é¢‘ -->
        <source src="https://assets.mixkit.co/music/preview/mixkit-happy-new-year-2023-1134.mp3" type="audio/mp3">
    </audio>

    <script>
        // ========== AIæ–°å¹´è´ºå¡ç”Ÿæˆå™¨ ==========
        class AIBlessingGenerator {
            constructor() {
                this.localTemplates = {
                    children: [
                        `äº²çˆ±çš„{{name}}å°æœ‹å‹ï¼Œ{{age}}å²æ–°å¹´å¿«ä¹ï¼åœ¨è¿™è¾æ—§è¿æ–°çš„ç¾å¥½æ—¶åˆ»ï¼Œæ„¿ä½ çš„ç¬‘å®¹å¦‚é˜³å…‰èˆ¬ç¿çƒ‚ï¼Œæ„¿ä½ çš„ç«¥å¹´å¦‚ç«¥è¯èˆ¬ç²¾å½©ã€‚æ–°å¹´æ–°æ°”è±¡ï¼Œæ„¿ä½ å¥åº·å¿«ä¹åœ°æˆé•¿ï¼Œå­¦ä¹ è¿›æ­¥ï¼Œå¤©å¤©å‘ä¸Šï¼è®°ä½ï¼Œæ¯ä¸€ä¸ªæ¢¦æƒ³éƒ½å€¼å¾—è¿½é€ï¼Œæ¯ä¸€æ¬¡åŠªåŠ›éƒ½ä¼šå¼€èŠ±ç»“æœã€‚æ„¿2026å¹´çš„æ¯ä¸€å¤©éƒ½å……æ»¡æƒŠå–œä¸æ¬¢ä¹ï¼`,
                        `{{name}}å®è´ï¼Œ{{age}}å²æ–°å¹´å¥½ï¼ä½ æ˜¯æœ€é—ªäº®çš„å°æ˜Ÿæ˜Ÿï¼Œæ„¿æ–°çš„ä¸€å¹´é‡Œæ›´åŠ é—ªè€€ï¼å¿«ä¹æˆé•¿ï¼Œæ— å¿§æ— è™‘ï¼Œè®©æ¯ä¸€å¤©éƒ½åƒè¿‡æ–°å¹´ä¸€æ ·å¼€å¿ƒï¼çˆ¸çˆ¸å¦ˆå¦ˆçš„éª„å‚²ï¼Œè€å¸ˆçœ¼ä¸­çš„å¥½å­©å­ï¼Œæ„¿ä½ åœ¨æ–°çš„ä¸€å¹´é‡Œç»§ç»­ç»½æ”¾å…‰å½©ï¼`
                    ],
                    youth: [
                        `è‡´{{age}}å²çš„{{name}}ï¼šé’æ˜¥æ­£å½“æ—¶ï¼Œæ–°å¹´æ–°èµ·ç‚¹ï¼æ„¿ä½ åœ¨2026å¹´å­¦ä¸šæœ‰æˆï¼Œé‡‘æ¦œé¢˜åï¼›æ„¿ä½ çš„æ¢¦æƒ³å¦‚æ˜Ÿè¾°èˆ¬ç’€ç’¨ï¼Œæ„¿ä½ çš„åŠªåŠ›å¦‚æ˜¥é£èˆ¬æ¸©æš–ã€‚å‹‡æ•¢è¿½æ¢¦ï¼Œä¸è´ŸéŸ¶åï¼ä¿æŒçƒ­æƒ…ï¼Œè¿æ¥æŒ‘æˆ˜ï¼Œåœ¨æ–°çš„ä¸€å¹´é‡Œåˆ›é€ å±äºè‡ªå·±çš„è¾‰ç…Œï¼`,
                        `{{name}}ï¼Œ{{age}}å²çš„ä½ æ­£å€¼å¤§å¥½å¹´åï¼æ–°å¹´æ„¿ä½ å‹‡æ•¢è¿½æ¢¦ï¼Œå±•ç°è‡ªæˆ‘ï¼Œè®©é’æ˜¥åœ¨å¥‹æ–—ä¸­é—ªå…‰ï¼æ„¿ä½ çš„2026å¹´å……æ»¡æœºé‡ï¼Œæ”¶è·æ»¡æ»¡çš„æˆåŠŸä¸å–œæ‚¦ï¼`
                    ],
                    adult: [
                        `å°Šæ•¬çš„{{name}}ï¼Œ{{age}}å²æ–°å¹´å¥½ï¼æ„¿æ‚¨åœ¨æ–°çš„ä¸€å¹´é‡Œäº‹ä¸šè’¸è’¸æ—¥ä¸Šï¼Œå®¶åº­å¹¸ç¦ç¾æ»¡ã€‚å·¥ä½œé¡ºåˆ©ï¼Œèº«ä½“å¥åº·ï¼Œå¿ƒæƒ³äº‹æˆï¼æ„¿2026å¹´å¸¦ç»™ä½ æ— é™å¯èƒ½ï¼Œå®ç°æ‰€æœ‰çš„æ¢¦æƒ³ä¸ç›®æ ‡ï¼`,
                        `{{name}}ï¼Œ{{age}}å²æ­£æ˜¯é»„é‡‘æ—¶æœŸï¼æ–°å¹´å¤§å±•å®å›¾ï¼Œå‰ç¨‹ä¼¼é”¦ï¼æ„¿2026å¹´æˆä¸ºä½ äººç”Ÿä¸­åˆä¸€ä¸ªä¸°æ”¶ä¹‹å¹´ï¼Œæ„¿æ‰€æœ‰çš„åŠªåŠ›éƒ½èƒ½å¾—åˆ°å›æŠ¥ï¼`
                    ],
                    elder: [
                        `æ•¬çˆ±çš„{{name}}é•¿è€…ï¼Œ{{age}}è½½æ˜¥ç§‹è§è¯äº†å²æœˆçš„ç¾å¥½ã€‚æ–°å¹´å®‰åº·ï¼Œæ„¿æ‚¨ç¦å¦‚ä¸œæµ·ï¼Œå¯¿æ¯”å—å±±ã€‚äº«å—å¤©ä¼¦ä¹‹ä¹ï¼Œå®‰äº«å¹¸ç¦æ™šå¹´ï¼æ„¿æ–°çš„ä¸€å¹´å¸¦ç»™æ‚¨å¥åº·ã€å¹³å®‰å’Œæ— é™çš„æ¬¢ä¹ï¼`,
                        `{{name}}å‰è¾ˆï¼Œ{{age}}å²æ–°å¹´å¿«ä¹ï¼å²æœˆæ²‰æ·€æ™ºæ…§ï¼Œæ–°å¹´å†æ·»ç¦æ°”ï¼æ„¿æ‚¨å¥åº·é•¿å¯¿ï¼Œç¬‘å£å¸¸å¼€ï¼æ„¿æ¯ä¸€å¤©éƒ½å……æ»¡é˜³å…‰å’Œæ¸©æš–ï¼`
                    ]
                };
            }
            
            async generateBlessing(name, age) {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        const blessing = this.createAIBlessing(name, age);
                        resolve(blessing);
                    }, 2000);
                });
            }
            
            createAIBlessing(name, age) {
                let category = 'adult';
                if (age < 12) category = 'children';
                else if (age < 18) category = 'youth';
                else if (age >= 60) category = 'elder';
                
                const baseText = this.localTemplates[category][0];
                const enhancedText = baseText.replace(/{{name}}/g, name).replace(/{{age}}/g, age);
                
                const additions = {
                    children: `\n\næ–°çš„ä¸€å¹´ï¼Œæ„¿ä½ ä¿æŒç«¥çœŸï¼Œæ¢ç´¢ä¸–ç•Œçš„å¥½å¥‡å¿ƒæ°¸ä¸ç†„ç­ã€‚æ¯ä¸ªæ¢¦æƒ³éƒ½å€¼å¾—è¿½æ±‚ï¼Œæ¯æ¬¡å°è¯•éƒ½æ˜¯æˆé•¿çš„ç¤¼ç‰©ã€‚`,
                    youth: `\n\n2026å¹´ï¼Œæ„¿ä½ å‹‡æ•¢è¿½æ¢¦ï¼Œä¸ç•æŒ‘æˆ˜ã€‚åœ¨çŸ¥è¯†çš„æµ·æ´‹ä¸­é¨æ¸¸ï¼Œåœ¨é’æ˜¥çš„èˆå°ä¸Šç»½æ”¾ã€‚`,
                    adult: `\n\næ–°çš„ä¸€å¹´ï¼Œæ„¿ä½ äº‹ä¸šä¸å®¶åº­åŒä¸°æ”¶ï¼Œå¥åº·ä¸å¿«ä¹å¸¸ç›¸ä¼´ã€‚æ¯ä¸ªåŠªåŠ›éƒ½æœ‰å›æŠ¥ï¼Œæ¯ä¸ªé€‰æ‹©éƒ½å¸¦æ¥æˆé•¿ã€‚`,
                    elder: `\n\næ–°çš„ä¸€å¹´ï¼Œæ„¿æ‚¨äº«å—ç”Ÿæ´»çš„æ¯ä¸€åˆ»ï¼Œå¥åº·å¹³å®‰ï¼Œç¬‘å£å¸¸å¼€ã€‚æ‚¨çš„æ™ºæ…§æ˜¯å®¶åº­æœ€å®è´µçš„è´¢å¯Œã€‚`
                };
                
                return enhancedText + additions[category];
            }
        }

        // ========== ä¸»åº”ç”¨ç¨‹åº ==========
        class NewYearApp {
            constructor() {
                this.currentUser = null;
                this.audioEnabled = true;
                this.fireworkActive = false;
                this.aiGenerator = new AIBlessingGenerator();
                this.audio = document.getElementById('newYearAudio');
                this.audioPlaying = false;
                this.countdownInterval = null;
                this.textElements = [];
                this.currentTextIndex = 0;
                this.holidaysData = [];
                this.isManualTime = false;
                this.manualDateTime = null;
                this.visitorCount = localStorage.getItem('visitorCount') ? parseInt(localStorage.getItem('visitorCount')) : 0;
                this.todayUsers = localStorage.getItem('todayUsers') ? parseInt(localStorage.getItem('todayUsers')) : 0;
                this.currentDate = new Date();
                this.lastVisitDate = localStorage.getItem('lastVisitDate');
                
                this.init();
            }
            
            init() {
                this.initParticles();
                this.initEventListeners();
                this.loadHolidaysData();
                this.prepareAudio();
                this.updateVisitorStats();
                this.checkNewDay();
                this.checkSavedUser();
                
                // æµ‹è¯•æŒ‰é’®ï¼ˆå¼€å‘æ—¶ä½¿ç”¨ï¼‰
                if (window.location.href.includes('test')) {
                    document.getElementById('testButtons').style.display = 'block';
                }
            }
            
            checkSavedUser() {
                const savedUser = localStorage.getItem('newYearUser');
                const savedBlessing = localStorage.getItem('newYearBlessing');
                
                if (savedUser && savedBlessing) {
                    try {
                        const user = JSON.parse(savedUser);
                        this.currentUser = user;
                        
                        // æ›´æ–°ç”¨æˆ·é—®å€™
                        document.getElementById('userGreeting').textContent = 
                            `è°¢è°¢ä½ åœ¨æˆ‘çš„ç½‘ç«™è·¨å¹´ï¼Œ${user.name}`;
                        document.getElementById('letterRecipient').textContent = user.name;
                        document.getElementById('letterAge').textContent = `${user.age}å²`;
                        document.getElementById('letterContent').textContent = savedBlessing;
                        
                        // ç›´æ¥æ˜¾ç¤ºä¸»ç•Œé¢
                        document.getElementById('welcomeScreen').style.display = 'none';
                        document.getElementById('mainContent').classList.add('active');
                        this.startCountdown();
                        this.showNotification(`æ¬¢è¿å›æ¥ï¼Œ${user.name}ï¼`, 'success');
                    } catch (e) {
                        console.log('æ— æ³•åŠ è½½ä¿å­˜çš„æ•°æ®');
                    }
                }
            }
            
            initParticles() {
                particlesJS('particles-js', {
                    particles: {
                        number: { value: 100, density: { enable: true, value_area: 800 } },
                        color: { value: ["#FF3366", "#33CCFF", "#FFCC00"] },
                        shape: { type: "circle" },
                        opacity: { value: 0.5, random: true },
                        size: { value: 3, random: true },
                        move: {
                            enable: true,
                            speed: 2,
                            direction: "none",
                            random: true
                        }
                    }
                });
            }
            
            initEventListeners() {
                // ç”¨æˆ·è¡¨å•
                document.getElementById('userForm').addEventListener('submit', (e) => this.handleUserSubmit(e));
                
                // ä¿¡å°æŒ‰é’®äº‹ä»¶
                document.getElementById('envelopeButton').addEventListener('click', () => this.showLetter());
                
                // æµ‹è¯•æŒ‰é’®
                document.getElementById('testNewYearBtn')?.addEventListener('click', () => this.triggerNewYearEffects());
                
                // è´ºå¡å’Œæ—¥å†æŒ‰é’®äº‹ä»¶
                document.getElementById('closeLetterBtn').addEventListener('click', () => this.closeLetter());
                document.getElementById('backToMainBtn').addEventListener('click', () => this.backToMain());
                
                // éŸ³é¢‘äº¤äº’
                document.addEventListener('click', () => this.enableAudio(), { once: true });
                
                // ç®¡ç†å‘˜åŠŸèƒ½
                this.initAdminAccess();
                
                // ç®¡ç†å‘˜é¢æ¿æŒ‰é’®
                document.getElementById('setTimeBtn').addEventListener('click', () => this.setManualTime());
                document.getElementById('resetTimeBtn').addEventListener('click', () => this.resetToRealTime());
                document.getElementById('triggerNewYearBtn').addEventListener('click', () => this.triggerNewYearEffects());
                document.getElementById('closeAdminBtn').addEventListener('click', () => this.closeAdminPanel());
            }
            
            initAdminAccess() {
                let ctrlCount = 0;
                let secretInput = '';
                const SECRET_CODE = '19996837879gxh';
                
                document.addEventListener('keydown', (e) => {
                    // æ£€æŸ¥Ctrlé”®5æ¬¡
                    if (e.key === 'Control' || e.key === 'Meta') {
                        ctrlCount++;
                        setTimeout(() => { ctrlCount = 0; }, 3000);
                        
                        if (ctrlCount >= 5) {
                            const password = prompt('ğŸ” è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç ï¼š');
                            if (password === SECRET_CODE) {
                                this.showAdminPanel();
                            } else {
                                this.showNotification('å¯†ç é”™è¯¯', 'error');
                            }
                            ctrlCount = 0;
                        }
                    }
                    
                    // æ£€æŸ¥ç§˜å¯†ä»£ç è¾“å…¥
                    if (e.key.length === 1) {
                        secretInput += e.key;
                        if (secretInput.includes(SECRET_CODE)) {
                            this.showAdminPanel();
                            secretInput = '';
                        }
                        if (secretInput.length > 20) secretInput = '';
                    }
                });
            }
            
            checkNewDay() {
                const today = new Date().toDateString();
                if (this.lastVisitDate !== today) {
                    this.todayUsers = 1;
                    localStorage.setItem('todayUsers', this.todayUsers);
                    localStorage.setItem('lastVisitDate', today);
                } else {
                    this.todayUsers++;
                    localStorage.setItem('todayUsers', this.todayUsers);
                }
            }
            
            updateVisitorStats() {
                this.visitorCount++;
                localStorage.setItem('visitorCount', this.visitorCount);
                
                // æ›´æ–°ç®¡ç†å‘˜é¢æ¿æ˜¾ç¤º
                document.getElementById('totalUsers').textContent = this.todayUsers;
                document.getElementById('totalVisits').textContent = this.visitorCount;
                document.getElementById('activeUsers').textContent = Math.floor(Math.random() * 10) + 1;
                document.getElementById('currentYear').textContent = '2025';
            }
            
            async handleUserSubmit(e) {
                e.preventDefault();
                
                const userName = document.getElementById('userName').value.trim();
                const userAge = parseInt(document.getElementById('userAge').value);
                
                if (!userName || userAge < 1 || userAge > 120) {
                    this.showNotification('è¯·è¾“å…¥æœ‰æ•ˆçš„å§“åå’Œå¹´é¾„ï¼ˆ1-120å²ï¼‰', 'error');
                    return;
                }
                
                this.currentUser = { name: userName, age: userAge };
                
                // æ›´æ–°ç”¨æˆ·é—®å€™
                document.getElementById('userGreeting').textContent = 
                    `è°¢è°¢ä½ åœ¨æˆ‘çš„ç½‘ç«™è·¨å¹´ï¼Œ${userName}`;
                document.getElementById('letterRecipient').textContent = userName;
                document.getElementById('letterAge').textContent = `${userAge}å²`;
                
                // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
                document.getElementById('loadingOverlay').classList.add('active');
                document.getElementById('loadingText').textContent = 'AIæ­£åœ¨ä¸ºæ‚¨åˆ›ä½œæ–°å¹´ç¥ç¦...';
                
                try {
                    // ç”ŸæˆAIæ–°å¹´è´ºå¡
                    const blessing = await this.aiGenerator.generateBlessing(userName, userAge);
                    document.getElementById('letterContent').textContent = blessing;
                    
                    // ä¿å­˜ç”¨æˆ·ä¿¡æ¯
                    localStorage.setItem('newYearUser', JSON.stringify(this.currentUser));
                    localStorage.setItem('newYearBlessing', blessing);
                    
                    // éšè—åŠ è½½åŠ¨ç”»
                    document.getElementById('loadingOverlay').classList.remove('active');
                    
                    // è¿‡æ¸¡åˆ°ä¸»ç•Œé¢
                    document.getElementById('welcomeScreen').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('welcomeScreen').style.display = 'none';
                        document.getElementById('mainContent').classList.add('active');
                        this.startCountdown();
                        this.showNotification(`æ¬¢è¿${userName}ï¼æ–°å¹´å€’è®¡æ—¶å¼€å§‹`, 'success');
                    }, 500);
                    
                } catch (error) {
                    console.error('ç”Ÿæˆç¥ç¦å¤±è´¥:', error);
                    // ä½¿ç”¨æœ¬åœ°æ¨¡æ¿ä½œä¸ºå¤‡ç”¨
                    setTimeout(() => {
                        const localBlessing = this.aiGenerator.createAIBlessing(userName, userAge);
                        document.getElementById('letterContent').textContent = localBlessing;
                        
                        document.getElementById('loadingOverlay').classList.remove('active');
                        
                        document.getElementById('welcomeScreen').style.opacity = '0';
                        setTimeout(() => {
                            document.getElementById('welcomeScreen').style.display = 'none';
                            document.getElementById('mainContent').classList.add('active');
                            this.startCountdown();
                            this.showNotification(`æ¬¢è¿${userName}ï¼æ–°å¹´å€’è®¡æ—¶å¼€å§‹`, 'success');
                        }, 500);
                    }, 1000);
                }
            }
            
            startCountdown() {
                // æ¸…é™¤ç°æœ‰è®¡æ—¶å™¨
                if (this.countdownInterval) {
                    clearInterval(this.countdownInterval);
                }
                
                this.updateCountdown();
                this.countdownInterval = setInterval(() => this.updateCountdown(), 1000);
            }
            
            updateCountdown() {
                const now = this.isManualTime && this.manualDateTime ? 
                    new Date(this.manualDateTime) : new Date();
                
                // å¦‚æœä½¿ç”¨æ‰‹åŠ¨æ—¶é—´ï¼Œè®©æ—¶é—´å‰è¿›
                if (this.isManualTime && this.manualDateTime) {
                    this.manualDateTime = new Date(this.manualDateTime.getTime() + 1000);
                }
                
                const targetTime = new Date(2026, 0, 1, 0, 0, 0);
                const diff = targetTime - now;
                
                // æ£€æŸ¥æ˜¯å¦å·²ç»è¿‡äº†æ–°å¹´
                if (diff <= 0) {
                    // å·²ç»æ˜¯2026å¹´
                    document.getElementById('days').textContent = '00';
                    document.getElementById('hours').textContent = '00';
                    document.getElementById('minutes').textContent = '00';
                    document.getElementById('seconds').textContent = '00';
                    
                    if (!this.fireworkActive) {
                        this.triggerNewYearEffects();
                    }
                    return;
                }
                
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                document.getElementById('days').textContent = days.toString().padStart(2, '0');
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
                
                // æ›´æ–°ç®¡ç†å‘˜é¢æ¿æ—¶é—´æ˜¾ç¤º
                if (document.getElementById('adminPanel').classList.contains('active')) {
                    this.updateAdminTimeDisplay();
                }
                
                // å‰44ç§’æ’­æ”¾éŸ³é¢‘ï¼ˆåŸå§‹é€»è¾‘ï¼‰
                if (days === 0 && hours === 0 && minutes === 0 && seconds === 44) {
                    this.playAudio();
                }
                
                // é›¶ç‚¹è§¦å‘ç‰¹æ•ˆ
                if (days === 0 && hours === 0 && minutes === 0 && seconds <= 10 && seconds >= 0) {
                    if (!this.fireworkActive) {
                        this.triggerNewYearEffects();
                    }
                }
            }
            
            updateAdminTimeDisplay() {
                const now = this.isManualTime && this.manualDateTime ? 
                    new Date(this.manualDateTime) : new Date();
                
                const timeStr = now.toLocaleString('zh-CN', {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    hour12: false
                });
                
                document.getElementById('adminCurrentTime').textContent = timeStr;
            }
            
            prepareAudio() {
                this.audio.volume = 0.5;
                this.audio.preload = 'auto';
                this.audio.loop = true; // å¾ªç¯æ’­æ”¾ï¼ˆåŸå§‹é€»è¾‘ï¼‰
            }
            
            enableAudio() {
                this.audio.play().then(() => {
                    this.audio.pause();
                    this.audio.currentTime = 0;
                    this.audioPlaying = false;
                }).catch(() => {});
            }
            
            playAudio() {
                if (!this.audioEnabled || this.audioPlaying) return;
                
                this.audio.currentTime = 0;
                this.audio.loop = true; // å¾ªç¯æ’­æ”¾ï¼ˆåŸå§‹é€»è¾‘ï¼‰
                this.audio.play().then(() => {
                    this.audioPlaying = true;
                }).catch((error) => {
                    console.log('éŸ³é¢‘æ’­æ”¾å¤±è´¥:', error);
                    this.audioPlaying = false;
                });
            }
            
            stopAudio() {
                this.audio.pause();
                this.audio.currentTime = 0;
                this.audioPlaying = false;
            }
            
            triggerNewYearEffects() {
                this.fireworkActive = true;
                
                // 1. èƒŒæ™¯å…¨é»‘ï¼ˆåŸå§‹é€»è¾‘ï¼‰
                document.getElementById('blackOverlay').classList.add('active');
                document.getElementById('mainContent').classList.remove('active');
                
                // 2. æ’­æ”¾æ–°å¹´éŸ³é¢‘ï¼ˆå¦‚æœè¿˜æ²¡åœ¨æ’­æ”¾ï¼‰
                if (!this.audioPlaying) {
                    this.playAudio();
                }
                
                // 3. åˆ›å»ºå¤§é‡ç²’å­
                this.createMassiveParticles();
                
                // 4. æ˜¾ç¤ºæ–‡å­—åŠ¨ç”»ï¼ˆç²’å­æ–‡å­—æ•ˆæœï¼‰
                setTimeout(() => {
                    this.startTextAnimation();
                }, 1000);
            }
            
            createMassiveParticles() {
                particlesJS('particles-js', {
                    particles: {
                        number: { value: 300, density: { enable: true, value_area: 800 } },
                        color: { value: ["#FF3366", "#33CCFF", "#FFCC00", "#00CC88", "#FF00FF"] },
                        shape: { type: "circle" },
                        opacity: { value: 0.8, random: true, anim: { enable: true, speed: 1 } },
                        size: { value: 3, random: true },
                        line_linked: { enable: false },
                        move: {
                            enable: true, speed: 5, direction: "none",
                            random: true, straight: false, out_mode: "out"
                        }
                    }
                });
            }
            
            startTextAnimation() {
                // æ˜¾ç¤ºæ–‡å­—æ˜¾ç¤ºå®¹å™¨
                document.getElementById('textDisplayContainer').classList.add('active');
                
                this.textElements = [
                    'staticText1', 'staticText2', 'staticText3', 
                    'staticText4', 'staticText5', 'staticText6'
                ];
                this.currentTextIndex = 0;
                
                this.showNextText();
            }
            
            showNextText() {
                if (this.currentTextIndex >= this.textElements.length) {
                    // æ‰€æœ‰æ–‡å­—æ˜¾ç¤ºå®Œæ¯•ï¼Œæ˜¾ç¤ºä¿¡å°æŒ‰é’®
                    setTimeout(() => {
                        document.getElementById('envelopeButtonContainer').classList.add('active');
                        this.createConfettiEffect();
                        this.showNotification('ç‚¹å‡»ä¸‹æ–¹çš„ä¿¡å°æŸ¥çœ‹æ‚¨çš„æ–°å¹´è´ºå¡', 'info');
                    }, 1500);
                    return;
                }
                
                const textId = this.textElements[this.currentTextIndex];
                const textElement = document.getElementById(textId);
                
                // åˆ›å»ºç²’å­æ–‡å­—ç‰¹æ•ˆ
                this.createTextParticles(textId);
                
                // æ˜¾ç¤ºæ–‡å­—
                setTimeout(() => {
                    textElement.classList.add('active');
                    
                    // ä¸ºå½“å‰æ–‡å­—åˆ›å»ºç¤¼èŠ±ç‰¹æ•ˆ
                    this.createTextConfetti();
                    
                    // 2.5ç§’åæ˜¾ç¤ºä¸‹ä¸€å¥
                    setTimeout(() => {
                        this.currentTextIndex++;
                        setTimeout(() => this.showNextText(), 500);
                    }, 2500);
                }, 500);
            }
            
            createTextParticles(textId) {
                const container = document.getElementById('textParticleContainer');
                const textElement = document.getElementById(textId);
                
                if (!textElement) return;
                
                const text = textElement.innerText || textElement.textContent;
                const rect = textElement.getBoundingClientRect();
                
                // åˆ›å»ºå¤šä¸ªç²’å­æ–‡å­—å‰¯æœ¬
                for (let i = 0; i < 5; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'text-particle';
                    particle.textContent = text;
                    particle.style.left = `${rect.left + Math.random() * 100 - 50}px`;
                    particle.style.top = `${rect.top + Math.random() * 100 - 50}px`;
                    particle.style.fontSize = `${3 + Math.random() * 1}rem`;
                    
                    container.appendChild(particle);
                    
                    // åŠ¨ç”»ç»“æŸåç§»é™¤ç²’å­
                    setTimeout(() => {
                        if (particle.parentNode === container) {
                            container.removeChild(particle);
                        }
                    }, 8000);
                }
                
                container.classList.add('active');
                
                // 8ç§’åéšè—ç²’å­å®¹å™¨
                setTimeout(() => {
                    container.classList.remove('active');
                }, 8000);
            }
            
            createTextConfetti() {
                confetti({
                    particleCount: 100,
                    spread: 100,
                    origin: { y: 0.6 },
                    colors: ['#FF3366', '#33CCFF', '#FFCC00', '#00CC88']
                });
            }
            
            createConfettiEffect() {
                // åˆ›å»ºè¿ç»­çš„ç¤¼èŠ±æ•ˆæœ
                const interval = setInterval(() => {
                    confetti({
                        particleCount: 50,
                        spread: 70,
                        origin: { y: 0.8 }
                    });
                }, 1000);
                
                // 5ç§’ååœæ­¢
                setTimeout(() => {
                    clearInterval(interval);
                }, 5000);
            }
            
            showLetter() {
                const letter = document.getElementById('letter');
                const container = document.getElementById('letterContainer');
                
                // éšè—ç‰¹æ•ˆç•Œé¢
                document.getElementById('textDisplayContainer').classList.remove('active');
                document.getElementById('envelopeButtonContainer').classList.remove('active');
                document.getElementById('textParticleContainer').classList.remove('active');
                document.getElementById('blackOverlay').classList.remove('active');
                
                // æ˜¾ç¤ºè´ºå¡
                container.classList.add('active');
                
                setTimeout(() => {
                    letter.classList.add('active');
                    this.showNotification('è¯·æŸ¥æ”¶æ‚¨çš„æ–°å¹´è´ºå¡', 'success');
                }, 100);
            }
            
            closeLetter() {
                const letter = document.getElementById('letter');
                const container = document.getElementById('letterContainer');
                
                letter.classList.remove('active');
                setTimeout(() => {
                    container.classList.remove('active');
                    this.showCalendar();
                }, 500);
            }
            
            loadHolidaysData() {
                this.holidaysData = [
                    {
                        name: "å…ƒæ—¦",
                        date: "1æœˆ1æ—¥ï¼ˆæ˜ŸæœŸå››ï¼‰",
                        desc: "æ”¾å‡3å¤©ï¼ˆ1æœˆ1æ—¥-1æœˆ3æ—¥ï¼‰",
                        color: "#FF3366"
                    },
                    {
                        name: "æ˜¥èŠ‚",
                        date: "2æœˆ17æ—¥ï¼ˆæ˜ŸæœŸäºŒï¼Œå†œå†æ­£æœˆåˆä¸€ï¼‰",
                        desc: "æ”¾å‡7å¤©ï¼ˆ2æœˆ15æ—¥-2æœˆ21æ—¥ï¼‰ï¼Œ2æœˆ14æ—¥ã€2æœˆ22æ—¥ä¸Šç­",
                        color: "#FFCC00"
                    },
                    {
                        name: "æ¸…æ˜èŠ‚",
                        date: "4æœˆ4æ—¥ï¼ˆæ˜ŸæœŸå…­ï¼‰",
                        desc: "æ”¾å‡3å¤©ï¼ˆ4æœˆ4æ—¥-4æœˆ6æ—¥ï¼‰",
                        color: "#00CC88"
                    },
                    {
                        name: "åŠ³åŠ¨èŠ‚",
                        date: "5æœˆ1æ—¥ï¼ˆæ˜ŸæœŸäº”ï¼‰",
                        desc: "æ”¾å‡5å¤©ï¼ˆ5æœˆ1æ—¥-5æœˆ5æ—¥ï¼‰ï¼Œ4æœˆ27æ—¥ã€5æœˆ10æ—¥ä¸Šç­",
                        color: "#33CCFF"
                    },
                    {
                        name: "ç«¯åˆèŠ‚",
                        date: "6æœˆ20æ—¥ï¼ˆæ˜ŸæœŸå…­ï¼Œå†œå†äº”æœˆåˆäº”ï¼‰",
                        desc: "æ”¾å‡3å¤©ï¼ˆ6æœˆ20æ—¥-6æœˆ22æ—¥ï¼‰",
                        color: "#9966FF"
                    },
                    {
                        name: "ä¸­ç§‹èŠ‚",
                        date: "10æœˆ6æ—¥ï¼ˆæ˜ŸæœŸäºŒï¼Œå†œå†å…«æœˆåäº”ï¼‰",
                        desc: "ä¸å›½åº†èŠ‚è¿ä¼‘",
                        color: "#FF9933"
                    },
                    {
                        name: "å›½åº†èŠ‚",
                        date: "10æœˆ1æ—¥ï¼ˆæ˜ŸæœŸå››ï¼‰",
                        desc: "æ”¾å‡7å¤©ï¼ˆ10æœˆ1æ—¥-10æœˆ7æ—¥ï¼‰ï¼Œ9æœˆ27æ—¥ã€10æœˆ10æ—¥ä¸Šç­",
                        color: "#FF3366"
                    }
                ];
            }
            
            showCalendar() {
                const holidayGrid = document.getElementById('holidayGrid');
                holidayGrid.innerHTML = '';
                
                this.holidaysData.forEach(holiday => {
                    const card = document.createElement('div');
                    card.className = 'holiday-card';
                    card.innerHTML = `
                        <div style="color: ${holiday.color}; font-size: 2rem; margin-bottom: 15px;">
                            <i class="fas fa-star"></i> ${holiday.name}
                        </div>
                        <div style="color: #33CCFF; margin-bottom: 15px; font-size: 1.3rem;">
                            <i class="far fa-calendar-alt"></i> ${holiday.date}
                        </div>
                        <div style="color: rgba(255, 255, 255, 0.9); font-size: 1.1rem; line-height: 1.8;">
                            ${holiday.desc}
                        </div>
                    `;
                    holidayGrid.appendChild(card);
                });
                
                document.getElementById('calendarContainer').classList.add('active');
            }
            
            backToMain() {
                // åœæ­¢æ‰€æœ‰éŸ³é¢‘
                this.stopAudio();
                
                // é‡ç½®æ ‡å¿—
                this.fireworkActive = false;
                
                // æ˜¾ç¤ºä¸»ç•Œé¢
                document.getElementById('calendarContainer').classList.remove('active');
                document.getElementById('mainContent').classList.add('active');
                document.getElementById('yearDisplay').textContent = '2026';
                
                // é‡æ–°å¼€å§‹å€’è®¡æ—¶ï¼ˆç°åœ¨æ˜¯2026å¹´ï¼‰
                this.startCountdown();
                
                this.showNotification('æ¬¢è¿æ¥åˆ°2026å¹´ï¼ç¥æ‚¨æ–°å¹´å¿«ä¹ï¼', 'success');
            }
            
            // ç®¡ç†å‘˜åŠŸèƒ½
            showAdminPanel() {
                document.getElementById('adminPanel').classList.add('active');
                this.updateAdminTimeDisplay();
                
                // å¯åŠ¨ç®¡ç†å‘˜é¢æ¿æ—¶é—´æ›´æ–°
                this.adminTimeInterval = setInterval(() => {
                    this.updateAdminTimeDisplay();
                }, 1000);
            }
            
            closeAdminPanel() {
                document.getElementById('adminPanel').classList.remove('active');
                if (this.adminTimeInterval) {
                    clearInterval(this.adminTimeInterval);
                }
            }
            
            setManualTime() {
                const year = parseInt(document.getElementById('adminYear').value) || 2025;
                const month = parseInt(document.getElementById('adminMonth').value) - 1 || 11;
                const day = parseInt(document.getElementById('adminDay').value) || 31;
                const hour = parseInt(document.getElementById('adminHour').value) || 23;
                const minute = parseInt(document.getElementById('adminMinute').value) || 59;
                const second = parseInt(document.getElementById('adminSecond').value) || 59;
                
                this.manualDateTime = new Date(year, month, day, hour, minute, second);
                this.isManualTime = true;
                this.fireworkActive = false;
                
                // é‡å¯å€’è®¡æ—¶
                this.startCountdown();
                
                this.showNotification(`æ—¶é—´å·²è®¾ç½®ä¸º ${year}å¹´${month+1}æœˆ${day}æ—¥ ${hour}:${minute}:${second}`, 'success');
            }
            
            resetToRealTime() {
                this.isManualTime = false;
                this.manualDateTime = null;
                this.fireworkActive = false;
                
                // é‡å¯å€’è®¡æ—¶
                this.startCountdown();
                
                this.showNotification('å·²æ¢å¤çœŸå®æ—¶é—´', 'info');
            }
            
            showNotification(message, type = 'info') {
                const notification = document.getElementById('notification');
                const text = document.getElementById('notificationText');
                
                text.textContent = message;
                
                // è®¾ç½®é¢œè‰²
                const colors = {
                    error: 'linear-gradient(135deg, #FF3366, #FF0033)',
                    success: 'linear-gradient(135deg, #00CC88, #009955)',
                    warning: 'linear-gradient(135deg, #FFCC00, #FF9900)',
                    info: 'linear-gradient(135deg, #33CCFF, #0099CC)'
                };
                
                notification.style.background = colors[type] || colors.info;
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
        }

        // å¯åŠ¨åº”ç”¨ç¨‹åº
        document.addEventListener('DOMContentLoaded', () => {
            window.app = new NewYearApp();
        });
    </script>
</body>
</html>